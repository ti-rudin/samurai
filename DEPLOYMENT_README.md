# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–≤—Ç–æ—Å–µ—Ä–≤–∏—Å–æ–º "Samurai"

## üìã –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–≤—Ç–æ—Å–µ—Ä–≤–∏—Å–æ–º "Samurai" —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ 5 –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö —Ç—Ä–µ–±—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ HTTPS –¥–æ–º–µ–Ω–∞:

1. **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å** (admin-front) - –ø–æ—Ä—Ç 1100
2. **–ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –ø–æ—Ä—Ç–∞–ª** (main-front) - –ø–æ—Ä—Ç 1101
3. **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π** (in-front) - –ø–æ—Ä—Ç 1102
4. **CMS Strapi** (strapi) - –ø–æ—Ä—Ç 1103
5. **Node-RED** (nodered) - –ø–æ—Ä—Ç 1880

## üõ†Ô∏è –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- **–û–°**: Ubuntu 22.04 LTS (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- **–û–ó–£**: 4 GB
- **–î–∏—Å–∫**: 20 GB SSD
- **Docker**: –≤–µ—Ä—Å–∏—è 20.10+
- **Docker Compose**: –≤–µ—Ä—Å–∏—è 2.0+


## üîë –ü–æ–ª—É—á–µ–Ω–∏–µ API —Ç–æ–∫–µ–Ω–æ–≤ Yandex

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã API —Ç–æ–∫–µ–Ω—ã –æ—Ç Yandex:

### 1. Yandex OAuth —Ç–æ–∫–µ–Ω
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [Yandex ID](https://id.yandex.ru/security)
2. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ —Ä–∞–∑–¥–µ–ª–µ "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏"
3. –ü–æ–ª—É—á–∏—Ç–µ OAuth —Ç–æ–∫–µ–Ω –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

### 2. Yandex GPT API —Ç–æ–∫–µ–Ω
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [Yandex Cloud Console](https://console.cloud.yandex.ru/)
2. –°–æ–∑–¥–∞–π—Ç–µ —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç
3. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á –¥–ª—è Yandex GPT
4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: https://cloud.yandex.ru/docs/iam/operations/iam-token/create

### 3. Yandex Vision API —Ç–æ–∫–µ–Ω
1. –í —Ç–æ–º –∂–µ —Å–µ—Ä–≤–∏—Å–Ω–æ–º –∞–∫–∫–∞—É–Ω—Ç–µ –≤–∫–ª—é—á–∏—Ç–µ Vision API
2. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á –¥–ª—è Vision
3. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: https://cloud.yandex.ru/docs/vision/

## üåê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS –∏ –¥–æ–º–µ–Ω–æ–≤

–î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å 5 HTTPS –¥–æ–º–µ–Ω–æ–≤, —É–∫–∞–∑—ã–≤–∞—é—â–∏—Ö –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä:

### –¢—Ä–µ–±—É–µ–º—ã–µ –¥–æ–º–µ–Ω—ã:
```
a.your-domain.com    ‚Üí –ø–æ—Ä—Ç 1100 (–∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å)
your-domain.com      ‚Üí –ø–æ—Ä—Ç 1101 (–∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –ø–æ—Ä—Ç–∞–ª)
in.your-domain.com       ‚Üí –ø–æ—Ä—Ç 1102 (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π)
strapi.your-domain.com      ‚Üí –ø–æ—Ä—Ç 1103 (Strapi CMS)
api.your-domain.com      ‚Üí –ø–æ—Ä—Ç 1880 (Node-RED)
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ DNS –ø–∞–Ω–µ–ª–∏:
1. –í–æ–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è DNS –≤–∞—à–µ–≥–æ –¥–æ–º–µ–Ω–∞
2. –°–æ–∑–¥–∞–π—Ç–µ A-–∑–∞–ø–∏—Å–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å—É–±–¥–æ–º–µ–Ω–∞:
   ```
   a.your-domain.com    A    –≤–∞—à-ip-–∞–¥—Ä–µ—Å
   your-domain.com      A    –≤–∞—à-ip-–∞–¥—Ä–µ—Å
   in.your-domain.com       A    –≤–∞—à-ip-–∞–¥—Ä–µ—Å
   strapi.your-domain.com      A    –≤–∞—à-ip-–∞–¥—Ä–µ—Å
   api.your-domain.com      A    –≤–∞—à-ip-–∞–¥—Ä–µ—Å
   ```

### SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Let's Encrypt –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- –ò–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã

## üì• –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
git clone https://github.com/ti-rudin/samurai-monorepo.git
cd samurai-monorepo

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
sudo chown -R $USER:$USER .
chmod -R 755 .
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–∫—É—â–µ–≥–æ:

```bash
cp .env .env.backup
nano .env
```

**–í–∞–∂–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:**

```env
# Yandex API Configuration
YANDEX_PASSPORT_OAUTH_TOKEN=your_yandex_oauth_token_here
YANDEX_GPT_FOLDER_ID=your_yandex_gpt_folder_id
YANDEX_VISION_FOLDER_ID=your_yandex_vision_folder_id
YANDEX_GPT_FOLDER_ID_2=your_second_gpt_folder_id

# Service URLs (–∏–∑–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à–∏ –¥–æ–º–µ–Ω—ã)
VITE_ADMIN_FRONTEND_URL=https://admin.your-domain.com
VITE_MAIN_FRONTEND_URL=https://www.your-domain.com
VITE_IN_FRONTEND_URL=https://in.your-domain.com
VITE_MAIN_URL=https://www.your-domain.com
VITE_API_URL=https://api.your-domain.com
VITE_STRAPI_URL=https://api.your-domain.com

# CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–¥–æ–±–∞–≤—å—Ç–µ –≤–∞—à–∏ –¥–æ–º–µ–Ω—ã)
VITE_ALLOWED_HOSTS=api.your-domain.com,admin.your-domain.com,www.your-domain.com,in.your-domain.com
CORS_ORIGIN=https://www.your-domain.com,https://admin.your-domain.com,https://in.your-domain.com

# Database Configuration (–º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
DATABASE_CLIENT=sqlite
DATABASE_HOST=localhost
DATABASE_PORT=3306
DATABASE_NAME=strapi
DATABASE_USERNAME=strapi
DATABASE_PASSWORD=your_secure_password_here

# JWT Secrets (–°–ì–ï–ù–ï–†–ò–†–£–ô–¢–ï –°–í–û–ò!)
JWT_SECRET=your_generated_jwt_secret_here
ADMIN_JWT_SECRET=your_generated_admin_jwt_secret_here
APP_KEYS=your_generated_app_keys_here
```


## üöÄ –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤:

```bash
# –°–±–æ—Ä–∫–∞ –≤—Å–µ—Ö –æ–±—Ä–∞–∑–æ–≤
docker-compose build

# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ, –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è:
COMPOSE_DOCKER_CLI_BUILD=1 DOCKER_BUILDKIT=1 docker-compose build
```

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:

```bash
# –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
docker-compose ps

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f
```

### –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º:

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å—ã –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ –∞–¥—Ä–µ—Å–∞–º:
- **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å**: https://a.your-domain.com
- **–ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –ø–æ—Ä—Ç–∞–ª**: https://your-domain.com
- **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π**: https://in.your-domain.com
- **Strapi Admin**: https://strapi.your-domain.com/admin
- **Node-RED**: https://api.your-domain.com

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Strapi

### –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ Strapi

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://strapi.your-domain.com/admin
2. –õ–æ–≥–∏–Ω - admin, –ø–∞—Ä–æ–ª—å - Samurai123
–≠—Ç–æ —É—á–µ—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞. 

### –°–æ–∑–¥–∞–Ω–∏–µ —É—á–µ—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π


1. **–í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É** –ø–æ–¥  —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å—å—é —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

2. **–°–æ–∑–¥–∞–π—Ç–µ —É—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏** –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –∏ –º–µ—Ö–∞–Ω–∏–∫–æ–≤:
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **Settings > Administration > Users**
   - –ù–∞–∂–º–∏—Ç–µ **Add new user**
   - –£–∫–∞–∂–∏—Ç–µ:
     - **Username**: –ª–æ–≥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
     - **Email**: email –∞–¥—Ä–µ—Å
     - **Password**: –ø–∞—Ä–æ–ª—å
     - **Role**: –Ω–∞–∑–Ω–∞—á—å—Ç–µ —Ä–æ–ª—å (Administrator –∏–ª–∏ Mechanic)

3. **–ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —É—á–µ—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å**:
   - –í —Å–∏—Å—Ç–µ–º–µ —É–∂–µ —Å–æ–∑–¥–∞–Ω–∞ —É—á–µ—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞:
   - **–õ–æ–≥–∏–Ω**: `admin`
   - **–ü–∞—Ä–æ–ª—å**: `samurai123`
   - **–†–æ–ª—å**: Manager

### –°—Ö–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö

–°–∏—Å—Ç–µ–º–∞ –ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Å –ø—Ä–µ–¥–Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π —Å—Ö–µ–º–æ–π –¥–∞–Ω–Ω—ã—Ö. –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã (Clients, Cars, Orders, Parts, Work, RepairMonitor) –∏ —Å–≤—è–∑–∏ –º–µ–∂–¥—É –Ω–∏–º–∏ —É–∂–µ —Å–æ–∑–¥–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.

## ü§ñ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Node-RED

### –î–æ—Å—Ç—É–ø –∫ Node-RED:
- URL: https://api.your-domain.com
- –õ–æ–≥–∏–Ω: `admin`
- –í—Ä–µ–º–µ–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å: `samurai123nr`



### –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è Node-RED:
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Node-RED
docker-compose stop nodered

# –í–æ–π–¥–∏—Ç–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose exec nodered bash

# –ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å —á–µ—Ä–µ–∑ npx
npx node-red-admin hash-pw

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π —Ö–µ—à –∏ –∑–∞–º–µ–Ω–∏—Ç–µ –≤ settings.js
nano ~/.node-red/settings.js
```

### –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è Strapi:
1. –í–æ–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω–∫—É Strapi
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Settings > Administration > Change password
3. –£–∫–∞–∂–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å


## üö® –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ**: –†–µ–≥—É–ª—è—Ä–Ω–æ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö Strapi
2. **SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã**: –û–±–Ω–æ–≤–ª—è–π—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≤—Å–µ—Ö –¥–æ–º–µ–Ω–æ–≤
4. **–û–±–Ω–æ–≤–ª–µ–Ω–∏—è**: –°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ Docker –æ–±—Ä–∞–∑–æ–≤ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–π—Ç–µ —Å–µ—Ä–≤–∏—Å—ã
5. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ –∏—Ö –º–µ–Ω—è–π—Ç–µ

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ DNS –Ω–∞—Å—Ç—Ä–æ–µ–∫
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤—Å–µ—Ö –ø–æ—Ä—Ç–æ–≤
4. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

---

**–£–¥–∞—á–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è! üéâ**
